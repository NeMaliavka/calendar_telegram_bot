# Объяснение ошибки "Request timeout error"

## Что это за ошибка?

`TelegramNetworkError: HTTP Client says - Request timeout error` — это **не ошибка двойного подключения**, а проблема с сетью или таймаутом при запросе к Telegram API.

## Разница между ошибками:

### 1. Таймаут сети (ваш случай)
```
TelegramNetworkError: HTTP Client says - Request timeout error
```
**Причины:**
- Временные проблемы с интернет-соединением
- Telegram API временно недоступен
- Медленное соединение
- Долгий ответ от сервера

**Решение:** Aiogram автоматически повторяет попытку (как видно в логах: "Sleep for 1.000000 seconds and try again...")

### 2. Двойное подключение (другая ошибка)
```
Conflict: terminated by other getUpdates request
```
или
```
Conflict: can't use getUpdates method while webhook is active
```
**Причины:**
- Бот запущен в нескольких процессах одновременно
- Одновременно используется webhook и polling
- Другой экземпляр бота использует тот же токен

**Решение:** Убедиться, что бот запущен только в одном месте

## Что было исправлено:

Добавлено удаление webhook перед запуском polling в `backend/bot.py`:
```python
await bot.delete_webhook(drop_pending_updates=True)
```

Это предотвращает конфликты, если webhook был установлен ранее.

## Рекомендации:

1. **Таймауты — это нормально**
   - Aiogram автоматически обрабатывает их
   - Бот продолжит работу после восстановления соединения

2. **Проверка двойного подключения:**
   - Убедитесь, что бот запущен только в одном месте
   - Проверьте, нет ли запущенных процессов: `python run_bot.py`
   - Если используете Docker, проверьте: `docker-compose ps`

3. **Если таймауты частые:**
   - Проверьте стабильность интернет-соединения
   - Увеличьте таймауты в настройках aiogram (если нужно)

## Текущее состояние:

✅ Webhook удаляется перед запуском polling  
✅ Автоматические повторы при таймаутах работают  
✅ Бот успешно переподключается после таймаутов

